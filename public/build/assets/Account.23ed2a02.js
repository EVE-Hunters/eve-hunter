var ae=Object.defineProperty;var re=(e,s,a)=>s in e?ae(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a;var Q=(e,s,a)=>(re(e,typeof s!="symbol"?s+"":s,a),a);import{r as o,C as A,S as K,y as P,L as ne,R as q,b as se,u as J,p as _,$,I as U,c as X,o as C,s as le,n as ie,d as oe,e as D,m as z,f as ce,N as de,g as h,h as y,i as ue,D as me,T as W,k as Y,x as pe,l as he,j as t,q as Z,F as I,W as g,a as i,t as G,v as E,w as V,H as ve,z as fe}from"./index.0acf707a.js";import{F as xe,g as x,S as ge,n as H,D as k,H as ye}from"./notify.628119f3.js";var be=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(be||{}),we=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(we||{}),Ne=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(Ne||{});function O(e,s=a=>a){let a=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,l=he(s(e.items.slice()),n=>n.dataRef.current.domRef.current),r=a?l.indexOf(a):null;return r===-1&&(r=null),{items:l,activeItemIndex:r}}let Ce={[1](e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},[0](e){return e.menuState===0?e:{...e,menuState:0}},[2]:(e,s)=>{var a;let l=O(e),r=pe(s,{resolveItems:()=>l.items,resolveActiveIndex:()=>l.activeItemIndex,resolveId:n=>n.id,resolveDisabled:n=>n.dataRef.current.disabled});return{...e,...l,searchQuery:"",activeItemIndex:r,activationTrigger:(a=s.trigger)!=null?a:1}},[3]:(e,s)=>{let a=e.searchQuery!==""?0:1,l=e.searchQuery+s.value.toLowerCase(),r=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+a).concat(e.items.slice(0,e.activeItemIndex+a)):e.items).find(d=>{var u;return((u=d.dataRef.current.textValue)==null?void 0:u.startsWith(l))&&!d.dataRef.current.disabled}),n=r?e.items.indexOf(r):-1;return n===-1||n===e.activeItemIndex?{...e,searchQuery:l}:{...e,searchQuery:l,activeItemIndex:n,activationTrigger:1}},[4](e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},[5]:(e,s)=>{let a=O(e,l=>[...l,{id:s.id,dataRef:s.dataRef}]);return{...e,...a}},[6]:(e,s)=>{let a=O(e,l=>{let r=l.findIndex(n=>n.id===s.id);return r!==-1&&l.splice(r,1),l});return{...e,...a,activationTrigger:1}}},B=o.exports.createContext(null);B.displayName="MenuContext";function L(e){let s=o.exports.useContext(B);if(s===null){let a=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,L),a}return s}function Ie(e,s){return J(s.type,Ce,e,s)}let Se=o.exports.Fragment,Re=A(function(e,s){let a=o.exports.useReducer(Ie,{menuState:1,buttonRef:o.exports.createRef(),itemsRef:o.exports.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:l,itemsRef:r,buttonRef:n},d]=a,u=P(s);ne([n,r],(b,S)=>{var w;d({type:1}),ce(S,de.Loose)||(b.preventDefault(),(w=n.current)==null||w.focus())},l===0);let m=o.exports.useMemo(()=>({open:l===0}),[l]),v=e,f={ref:u};return q.createElement(B.Provider,{value:a},q.createElement(se,{value:J(l,{[0]:_.Open,[1]:_.Closed})},$({ourProps:f,theirProps:v,slot:m,defaultTag:Se,name:"Menu"})))}),Fe="button",ke=A(function(e,s){var a;let[l,r]=L("Menu.Button"),n=P(l.buttonRef,s),d=`headlessui-menu-button-${U()}`,u=X(),m=C(p=>{switch(p.key){case h.Space:case h.Enter:case h.ArrowDown:p.preventDefault(),p.stopPropagation(),r({type:0}),u.nextFrame(()=>r({type:2,focus:y.First}));break;case h.ArrowUp:p.preventDefault(),p.stopPropagation(),r({type:0}),u.nextFrame(()=>r({type:2,focus:y.Last}));break}}),v=C(p=>{switch(p.key){case h.Space:p.preventDefault();break}}),f=C(p=>{if(ue(p.currentTarget))return p.preventDefault();e.disabled||(l.menuState===0?(r({type:1}),u.nextFrame(()=>{var R;return(R=l.buttonRef.current)==null?void 0:R.focus({preventScroll:!0})})):(p.preventDefault(),r({type:0})))}),b=o.exports.useMemo(()=>({open:l.menuState===0}),[l]),S=e,w={ref:n,id:d,type:le(e,l.buttonRef),"aria-haspopup":!0,"aria-controls":(a=l.itemsRef.current)==null?void 0:a.id,"aria-expanded":e.disabled?void 0:l.menuState===0,onKeyDown:m,onKeyUp:v,onClick:f};return $({ourProps:w,theirProps:S,slot:b,defaultTag:Fe,name:"Menu.Button"})}),Te="div",Me=K.RenderStrategy|K.Static,De=A(function(e,s){var a,l;let[r,n]=L("Menu.Items"),d=P(r.itemsRef,s),u=ie(r.itemsRef),m=`headlessui-menu-items-${U()}`,v=X(),f=oe(),b=(()=>f!==null?f===_.Open:r.menuState===0)();o.exports.useEffect(()=>{let c=r.itemsRef.current;!c||r.menuState===0&&c!==(u==null?void 0:u.activeElement)&&c.focus({preventScroll:!0})},[r.menuState,r.itemsRef,u]),xe({container:r.itemsRef.current,enabled:r.menuState===0,accept(c){return c.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:c.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(c){c.setAttribute("role","none")}});let S=C(c=>{var F,j;switch(v.dispose(),c.key){case h.Space:if(r.searchQuery!=="")return c.preventDefault(),c.stopPropagation(),n({type:3,value:c.key});case h.Enter:if(c.preventDefault(),c.stopPropagation(),n({type:1}),r.activeItemIndex!==null){let{dataRef:M}=r.items[r.activeItemIndex];(j=(F=M.current)==null?void 0:F.domRef.current)==null||j.click()}Y(r.buttonRef.current);break;case h.ArrowDown:return c.preventDefault(),c.stopPropagation(),n({type:2,focus:y.Next});case h.ArrowUp:return c.preventDefault(),c.stopPropagation(),n({type:2,focus:y.Previous});case h.Home:case h.PageUp:return c.preventDefault(),c.stopPropagation(),n({type:2,focus:y.First});case h.End:case h.PageDown:return c.preventDefault(),c.stopPropagation(),n({type:2,focus:y.Last});case h.Escape:c.preventDefault(),c.stopPropagation(),n({type:1}),z().nextFrame(()=>{var M;return(M=r.buttonRef.current)==null?void 0:M.focus({preventScroll:!0})});break;case h.Tab:c.preventDefault(),c.stopPropagation(),n({type:1}),z().nextFrame(()=>{me(r.buttonRef.current,c.shiftKey?W.Previous:W.Next)});break;default:c.key.length===1&&(n({type:3,value:c.key}),v.setTimeout(()=>n({type:4}),350));break}}),w=C(c=>{switch(c.key){case h.Space:c.preventDefault();break}}),p=o.exports.useMemo(()=>({open:r.menuState===0}),[r]),R=e,N={"aria-activedescendant":r.activeItemIndex===null||(a=r.items[r.activeItemIndex])==null?void 0:a.id,"aria-labelledby":(l=r.buttonRef.current)==null?void 0:l.id,id:m,onKeyDown:S,onKeyUp:w,role:"menu",tabIndex:0,ref:d};return $({ourProps:N,theirProps:R,slot:p,defaultTag:Te,features:Me,visible:b,name:"Menu.Items"})}),Ae=o.exports.Fragment,Pe=A(function(e,s){let{disabled:a=!1,...l}=e,[r,n]=L("Menu.Item"),d=`headlessui-menu-item-${U()}`,u=r.activeItemIndex!==null?r.items[r.activeItemIndex].id===d:!1,m=o.exports.useRef(null),v=P(s,m);D(()=>{if(r.menuState!==0||!u||r.activationTrigger===0)return;let N=z();return N.requestAnimationFrame(()=>{var c,F;(F=(c=m.current)==null?void 0:c.scrollIntoView)==null||F.call(c,{block:"nearest"})}),N.dispose},[m,u,r.menuState,r.activationTrigger,r.activeItemIndex]);let f=o.exports.useRef({disabled:a,domRef:m});D(()=>{f.current.disabled=a},[f,a]),D(()=>{var N,c;f.current.textValue=(c=(N=m.current)==null?void 0:N.textContent)==null?void 0:c.toLowerCase()},[f,m]),D(()=>(n({type:5,id:d,dataRef:f}),()=>n({type:6,id:d})),[f,d]);let b=C(N=>{if(a)return N.preventDefault();n({type:1}),Y(r.buttonRef.current)}),S=C(()=>{if(a)return n({type:2,focus:y.Nothing});n({type:2,focus:y.Specific,id:d})}),w=C(()=>{a||u||n({type:2,focus:y.Specific,id:d,trigger:0})}),p=C(()=>{a||!u||n({type:2,focus:y.Nothing})}),R=o.exports.useMemo(()=>({active:u,disabled:a}),[u,a]);return $({ourProps:{id:d,ref:v,role:"menuitem",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,disabled:void 0,onClick:b,onFocus:S,onPointerMove:w,onMouseMove:w,onPointerLeave:p,onMouseLeave:p},theirProps:l,slot:R,defaultTag:Ae,name:"Menu.Item"})}),T=Object.assign(Re,{Button:ke,Items:De,Item:Pe});const $e=e=>t("div",{...e,children:t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:t("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})}),Ee=e=>t("div",{...e,children:t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:t("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})})}),Le=e=>t("div",{...e,children:t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:t("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),Oe=({character:e,onCancel:s})=>{const{removeCharacter:a}=Z(),[l,r]=o.exports.useState(!0),n=()=>{s()},d=()=>{a(e),n()};return t(I,{children:t(g,{appear:!0,show:l,as:o.exports.Fragment,children:t(x,{as:"div",onClose:()=>n(),className:"fixed z-10 inset-0 overflow-y-auto",children:i("div",{className:"flex items-center justify-center min-h-screen",children:[t(g.Child,{as:o.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:t(x.Overlay,{className:"fixed inset-0 bg-black opacity-30"})}),t(g.Child,{as:o.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:i("div",{className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl",children:[t(x.Title,{as:"h3",className:"text-lg font-medium leading-6 text-red-600",children:"Remove character"}),t("div",{className:"my-2",children:i(x.Description,{children:["Are you sure you want to remove ",t("strong",{children:e.name})," from your account?"]})}),i("div",{className:"flex w-full mt-2",children:[t("button",{onClick:()=>n(),className:"rounded border px-3 py-2 transition-all hover:bg-gray-200",children:"Cancel"}),t("div",{className:"ml-auto"}),t("button",{onClick:()=>d(),className:"rounded border px-3 py-2 transition-all bg-red-500 text-red-100 hover:bg-red-600",children:"Remove Character"})]})]})})]})})})})},_e=()=>{const{characters:e,mainCharacter:s,updateMainCharacter:a}=Z(),[l,r]=o.exports.useState(null);return i(I,{children:[l&&t(Oe,{character:l,onCancel:()=>r(null)}),i("div",{children:[t("div",{className:"w-full text-2xl font-semibold",children:"Characters"}),t("a",{href:"/auth/sso/redirect",className:"inline-block my-2 rounded w-full px-3 py-2 text-center bg-gray-200 shadow-md hover:bg-gray-300",children:"Add Character"}),i("div",{className:"bg-white px-2 py-1 rounded max-h-96",children:[i("div",{className:"flex items-center px-2 py-1 my-2 border-b",children:[t("div",{className:"w-10 h-10",children:t(G,{character:s})}),t("span",{className:"px-2",children:s==null?void 0:s.name}),t("div",{className:"ml-auto"})]}),e.filter(n=>n.character_id!=(s==null?void 0:s.character_id)).map(n=>i("div",{className:"flex items-center px-2 py-1 my-2 border-b",children:[t("div",{className:"w-10 h-10",children:t(G,{character:n})}),t("span",{className:"px-2",children:n.name}),t("div",{className:"ml-auto"}),i(T,{as:"div",className:"relative inline-block text-left",children:[t("div",{children:t(T.Button,{className:"h-4 w-4 cursor-pointer",children:t(Le,{className:"w-4 h-4 cursor-pointer"})})}),t(g,{as:o.exports.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:t(T.Items,{className:"absolute right-0 w-56 mt-2 origin-top-right bg-white divide-y divide-gray-100 rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:i("div",{className:"px-1 py-1",children:[t(T.Item,{children:i("div",{className:"w-full cursor-pointer flex px-2 py-1 space-x-1 items-center hover:bg-gray-600 hover:text-white",onClick:()=>a(n),children:[t(Ee,{}),"Make Main"]})}),t(T.Item,{children:i("div",{onClick:()=>r(n),className:"w-full cursor-pointer flex px-2 py-1 space-x-1 items-center hover:bg-gray-600 hover:text-white",children:[t($e,{}),"Remove Character"]})})]})})})]})]},n.character_id))]})]})]})},ze=({value:e,onChange:s})=>{var d;const[a,l]=o.exports.useState((d=e.name)!=null?d:""),[r,n]=o.exports.useState(null);return o.exports.useEffect(()=>{var u;s&&s({name:a,staging_system_id:(u=r==null?void 0:r.system_id)!=null?u:0})},[a,r]),i("div",{className:"w-full flex flex-col",children:[i("div",{className:"mb-2",children:[i("label",{htmlFor:"name",children:["Channel Name ",t("span",{className:"text-red-600",children:"(required)"})]}),t("input",{autoComplete:"off",type:"text",name:"name",value:a,onChange:u=>l(u.target.value),className:"w-full focus:outline-none border rounded px-3 py-1"})]}),i("div",{className:"mb-2",children:[i("label",{children:["Staging System ",t("span",{className:"text-red-600",children:"(required)"})]}),t(ge,{onSystemSelect:n})]})]})},He=e=>t("div",{...e,children:t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),Ue=()=>{const{UpdateChannelList:e}=E(),[s,a]=o.exports.useState(!1),[l,r]=o.exports.useState({name:"",staging_system_id:0}),[n,d]=o.exports.useState([]),u=()=>{V.create(l).then(m=>{e(),H("Channel Created",`${l.name} Channel Created`),r({name:"",staging_system_id:0}),a(!1)}).catch(m=>{let v=m.response;if(v.status==400)H("Error",v.data.message,{type:"error",icon:t(He,{})});else{let f=Object.keys(m.response.data.errors).map(b=>m.response.data.errors[b]);d(f)}})};return i(I,{children:[t("button",{className:"w-full rounded shadow px-3 py-2 my-2 bg-gray-200 hover:bg-gray-300",onClick:()=>a(!0),children:"New Channel"}),t(g,{appear:!0,show:s,as:o.exports.Fragment,children:t(x,{as:"div",onClose:()=>a(!1),className:"fixed z-10 inset-0 overflow-y-auto",children:i("div",{className:"flex items-center justify-center min-h-screen",children:[t(g.Child,{as:o.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:t(x.Overlay,{className:"fixed inset-0 bg-black opacity-30"})}),t(g.Child,{as:o.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:i("div",{className:"inline-block w-full max-w-md p-6 my-8 text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl",children:[t(x.Title,{as:"h3",className:"text-lg font-medium leading-6 text-red-600",children:"New Channel"}),t("hr",{}),n.length>0&&t("div",{className:"bg-red-500 text-red-100 p-2 rounded shadow mt-2",children:n.map((m,v)=>t("div",{children:m},v))}),t("div",{className:"my-2",children:t(ze,{value:l,onChange:m=>r(m)})}),i("div",{className:"flex w-full mt-2",children:[t("button",{onClick:()=>a(!1),className:"rounded border px-3 py-2 transition-all hover:bg-gray-200",children:"Cancel"}),t("div",{className:"ml-auto"}),t("button",{onClick:()=>u(),className:"rounded border px-3 py-2 transition-all bg-blue-500 text-blue-100 hover:bg-blue-600",children:"Create Channel"})]})]})})]})})})]})},ee=e=>t("div",{...e,children:t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:t("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})})}),Ve=({channel:e})=>{const{UpdateChannelList:s}=E(),[a,l]=o.exports.useState(!1),r=()=>{V.delete(e).then(()=>{s(),H("Channel Deleted","")}).finally(()=>{l(!1)})};return i(I,{children:[t(ee,{className:"w-5 h-5 transform rotate-45 cursor-pointer",onClick:()=>l(!0)}),t(g,{appear:!0,show:a,as:o.exports.Fragment,children:t(x,{as:"div",onClose:()=>l(!1),className:"fixed z-10 inset-0 overflow-y-auto",children:i("div",{className:"flex items-center justify-center min-h-screen",children:[t(g.Child,{as:o.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:t(x.Overlay,{className:"fixed inset-0 bg-black opacity-30"})}),t(g.Child,{as:o.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:i("div",{className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl",children:[t(x.Title,{as:"h3",className:"text-lg font-medium leading-6 text-red-600",children:"Delete Channel"}),t("div",{className:"my-2",children:i(x.Description,{children:["Are you sure you want to delete the channel: ",t("strong",{children:e.name})]})}),i("div",{className:"flex w-full mt-2",children:[t("button",{onClick:()=>l(!1),className:"rounded border px-3 py-2 transition-all hover:bg-gray-200",children:"Cancel"}),t("div",{className:"ml-auto"}),t("button",{onClick:()=>r(),className:"rounded border px-3 py-2 transition-all bg-red-500 text-red-100 hover:bg-red-600",children:"Delete Channel"})]})]})})]})})})]})},Be=e=>t("div",{...e,children:t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:t("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})});class je extends ve{constructor(){super("/api/universe");Q(this,"search",a=>this.get("/search",{term:a}))}}const Qe=new je,Ke=({className:e="",entity_id:s,entity:a,size:l=32})=>{let r=a=="characters"?"portrait":a=="types"?"icon":"logo",n=`https://images.evetech.net/${a}/${s}/${r}?size=${l}`;return t("img",{className:e,src:n,alt:"Eve Entity image"})},te=({entity:e})=>i("div",{className:"flex space-x-2 py-0.5 items-center",children:[t(Ke,{entity_id:e.entity_id,entity:e.category,className:"rounded-full shadow w-10 h-10"}),i("div",{className:"flex flex-col",children:[t("span",{className:"font-medium",children:e.name}),t("span",{className:"font-thin italic",children:e.category})]})]}),qe=({onSelect:e})=>{const[s,a]=o.exports.useState(""),[l,r]=o.exports.useState([]),[n,d]=o.exports.useState(null),u=o.exports.useRef(setTimeout(()=>{}));return o.exports.useEffect(()=>{n!=null&&e&&e(n),a("")},[n]),o.exports.useEffect(()=>{clearTimeout(u.current),s.trim()!=""&&(u.current=setTimeout(()=>{Qe.search(s).then(m=>{r(m)})},500))},[s]),t(I,{children:t(k,{value:n,onChange:e,children:i("div",{className:"relative mt-1",children:[i("div",{className:"relative w-full border text-left bg-white rounded overflow-hidden cursor-default focus:outline-none focus-visible:ring-2 focus-visible:ring-opacity-75 focus-visible:ring-white focus-visible:ring-offset-teal-300 focus-visible:ring-offset-2 sm:text-sm overflow-hidden",children:[t(k.Input,{className:"w-full border-none focus:ring-0 py-2 pl-3 pr-10 text-sm leading-5 text-gray-900",onChange:m=>a(m.target.value)}),t(k.Button,{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:t(ye,{className:"w-5 h-5 text-gray-400","aria-hidden":"true"})})]}),t(g,{as:o.exports.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",afterLeave:()=>a(""),children:t(k.Options,{className:"absolute w-full py-1 mt-1 overflow-auto text-base bg-white rounded-md shadow-lg max-h-60 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:l.length===0&&s!==""?t("div",{className:"cursor-default select-none relative py-2 px-4 text-gray-700",children:"No Entities Found"}):l.map(m=>t(k.Option,{className:({active:v})=>`cursor-default select-none relative py-2 px-3 flex items-center space-x-2 ${v?"text-white bg-teal-600":"text-gray-900"}`,value:m,children:t(te,{entity:m})},m.entity_id))})})]})})})},We=({access:e=[],onChange:s})=>{const[a,l]=o.exports.useState(e),r=d=>{l(u=>u.filter(m=>m.entity_id!=d.entity_id))},n=d=>{l(u=>[...u,d])};return o.exports.useEffect(()=>{s(a)},[a]),i("div",{children:[t(qe,{onSelect:n}),t("div",{className:"rounded border mt-2 max-h-64 h-64 overflow-y-auto",children:a.map(d=>i("div",{className:"flex items-center px-3",children:[t(te,{entity:d}),t("div",{className:"ml-auto"}),t(ee,{className:"w-6 h-6 transform rotate-45 cursor-pointer",onClick:()=>r(d)})]},d.entity_id))})]})},Ge=({channel:e})=>{const[s,a]=o.exports.useState(!1),[l,r]=o.exports.useState(e.access),n=()=>{V.updateAccess(e,l.map(d=>d.entity_id)).then(d=>{a(!1)})};return i(I,{children:[t(Be,{className:"w-5 h-5",onClick:()=>a(!0)}),t(g,{appear:!0,show:s,as:o.exports.Fragment,children:t(x,{as:"div",onClose:()=>a(!1),className:"fixed z-10 inset-0 overflow-y-auto",children:i("div",{className:"flex items-center justify-center min-h-screen",children:[t(g.Child,{as:o.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:t(x.Overlay,{className:"fixed inset-0 bg-black opacity-30"})}),t(g.Child,{as:o.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:i("div",{className:"inline-block w-full max-w-md p-6 my-8 text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl",children:[i(x.Title,{as:"h3",className:"text-lg font-medium leading-6 text-red-600",children:[e.name," Channel Access"]}),t("hr",{}),t("div",{className:"my-2",children:t(We,{access:l,onChange:r})}),i("div",{className:"flex w-full mt-2",children:[t("button",{onClick:()=>a(!1),className:"rounded border px-3 py-2 transition-all hover:bg-gray-200",children:"Cancel"}),t("div",{className:"ml-auto"}),t("button",{onClick:()=>n(),className:"rounded border px-3 py-2 transition-all bg-blue-500 text-blue-100 hover:bg-blue-600",children:"Update Channel"})]})]})})]})})})]})},Je=()=>{const{user:e}=fe(),{Channels:s}=E(),[a,l]=o.exports.useState("");return i("div",{children:[t("div",{className:"w-full text-2xl font-semibold",children:"My Channels"}),t(Ue,{}),i("div",{className:"rounded bg-white",children:[t("input",{type:"text",className:"w-full px-2 py-1 rounded-lg focus:outline-none",placeholder:"search",onChange:n=>l(n.target.value)}),t("div",{className:"py-2",children:(()=>s.filter(n=>n.user_id==(e==null?void 0:e.id)).filter(n=>n.name.includes(a)||n.staging_system.name.includes(a)))().map(n=>i("div",{className:"flex w-full px-2 cursor-pointer items-center",children:[i("div",{className:"flex flex-col",children:[t("div",{children:n.name}),t("div",{children:n.staging_system.name})]}),t("div",{className:"ml-auto"}),t(Ge,{channel:n}),t(Ve,{channel:n})]},n.id))})]})]})},Xe=()=>{const{Channels:e}=E();return i(I,{children:[t("div",{className:"w-full text-2xl font-semibold",children:"Available Channels"}),t("div",{className:"rounded bg-white mt-2 overflow-hidden",children:e.map(s=>t("div",{className:"flex w-full px-2 py-2 items-center border-b",children:i("div",{className:"flex flex-col",children:[i("div",{children:["Channel: ",s.name]}),i("div",{children:["Staging: ",s.staging_system.name]}),i("div",{children:["Created by: ",s.user.name]})]})},s.id))})]})},tt=()=>t(I,{children:i("div",{className:"flex space-x-2",children:[t("div",{className:"w-64 ",children:t(_e,{})}),t("div",{className:"w-64",children:t(Je,{})}),t("div",{className:"w-64",children:t(Xe,{})})]})});export{tt as default};
